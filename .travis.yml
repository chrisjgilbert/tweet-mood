language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
deploy:
  provider: heroku
  app:
    master: tweet-mood
    heroku: tweet-mood
  api_key:
    secure: jC44EvJp/ctisoIIZ+oX2nMkrWIsMue9gqt6daFTgs4EIX3/Sin8qYpXxN+kK1cchJivmo/QEdej6+tSm/qrlCZr0ACTu6PjNgQVpwDnFFzGmWiqln6ehmm62GENFKNffsgSJmwk9opG0Ad7PAoYm9EJUR8meFvZRMDupyS1uEQBsLRvk+sTJTrCOJqjnbvmBmDeOGpVGWHMLNg2HC/q9F1CrVX3SjoeQDHHlRV7vaotxlFWFDbpndLmi6rbsFqUO7sfx2UH+glZVTrun3wlEOFTdbsGXEMtG0D+00UmCaJllODTVE+IE9/p/BjletHXfBDyGPVakK50peASmra3GmFjHQ+zbEW/npyz0FkWp+WjupE3yvwOrDi54PbvmNgZ/1lz1Uhgi/LMG2SYnCy4mY1ut1m9qoDjQdkIWdHYGm86vZX7zifLSMnstZaDKGvJNyWXC9R4Y0kvrEzPrvBlCChoeycEWzduGhCJ1i+wmcSOdWCnKLMju++rwB4XL2aYbrG3rkoXVxMrkkOQ6JhHCRmKng07bEVCfZWpINIrqnuEBuw7tRyAiEIkhnOOjoR1pV8qfP2364d55DWmSdb118u8hKaU5TlOyFkS9ZHQGjzW/+9f1WC2Ph2wN24+Yz7EV0IMF+dyE7r4P3lEZYmVhyOIGhpH95IJV9X4kQku4qE=
