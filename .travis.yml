language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
deploy:
  provider: heroku
  api_key:
    secure: WCfD2uDi+OtljQ3ITOoEeWObP22UDK4X+6MVzjC4k0kQVv6xutbtxSn15UzVWDx5rbX3Chjia1v7wlDI8OQskH4twwPOHA6KEu3dgn+JlfahBoOpPNSA7Epv7OWCo1ngwzyz4EakhvtuHeorvLYmsPvs2QwhT7dkBu7K+e6x2XiVcq9XiGuRvwVX4/wjlpiTe7YvQWxXkOKZkaJU5i1D0XceW16Z5ps9FDnP9iwv0YkdcTz4m/CNXUuzq0TOkjhjOt9fmu7M1q93Gi/D42YYYY+vDbWhtJT/Pz1i/pMhJffv9vckBC2GRSZuxA3EUOsS6ff9SPzwATmAAFiNAn+ZyUL5VKzvOBgAltwQxnZooGOf3hGtZoll15mCPGuHHrVOevYT8QfzSjEkvqLG5kyB5rw3tc0W1m9Er+Eg0XIXWY9VXd8RJx0MltVfHlk3JRBv2wELy23vEC/eyIpaJNVnxA4BvnvQogsB86/UOzEBgjyU7IjaHjbPhn//tJ1Ezoxpc0InybjTdqEEc154CFyBpEhU+/srhW+6inxkG7/hnSLLnjMX69UlSIisyw5kKAGoZZLd9sLAbdChL0oHIfUbbBEJofP5kYun41gbhPYlt0DfNEqJovS9OPqhSmj4EUILHT/JE+1Wnt+vWXMCUqEORrpLt6uW/Rx74Esfzc3K+4c=
  app: tweet-mood
  on:
    repo: kirillzabrodin/tweet_mood
    branch: heroku
