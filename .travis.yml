language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  - secure: DcTMjruoq0SxVRHUvKpAiKyNUqwHjQkibve3X36/wgHU7r9TI3Xojn8o7daZ2I0a8uDe0mSK+tSRp4qM9SAVAL1HYXAwAEeSo0VJp+sM6r+l2I7iAFADKq40wPt4K6UGaOXf57t4GlAmfDAimv75k9ARuH/xo1rA9qBe9XqdgN4Pvp7zDm3tu28Q0HkgscYGmeiV7Zf0T0iWdth4D3Hxy+3vnDvPDBQWis6Va9BwD6Vs6zA9ZO6rEqp5vj4LcvKjSOMoYkXEV69g3dlA47qcIVrWEDz2U1RnDCz2D1lL9wbY5OBpHuwJcu1MHqdTC1/7Ng/dapV+2i/2AwR4PrJqZD7Xvx2VH7/HcsjkmiZ0gUbXh4NhndVvPRX7TZPFbWYr/qajtdHt2CACLW9wV+aVbyg3cx2e6KhJQf20X1tBlq6tzXEc/V5CyxiMmPde8pCSyA9kLMPU7heYCBtR4OhWdFgv9K50CqbzB2YINmnAB4OsK0MFFJNvaAuevup3VTdhPTbxELOP8JHDmD+zEsDltqaDspoDrlwwIVNkwtjkfnnMzuJUX4w+RaTu38T0CNY/r7HkioGkdS4L4Z8hXzZQUL5S0ciBmqliElDwHtyIjZWGL6TxmRrJH8LuRC3jyHFqA2CkrYo4jNzwJYI+wPiSg9doMD8eHAlWoBuvQoe8JjY=
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
