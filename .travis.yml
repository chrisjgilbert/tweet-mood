language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
deploy:
  provider: heroku
  app:
    master: tweet-mood
    heroku: tweet-mood
  api_key:
    secure: mbEpxbdNkkr//Yb/3y3//YKpPWHcJikIR+Dd/qUSG1nhv5uH/d85Dyltjmrljyjp731gYkRPe9FKmLRXoIQMi+jKkc52Ri0B2s0+YZIzOkUzzyw4oOYQQ5Pe2RiR856qt/4pjm1stopJUdpHKhSTV9AEhBnd5mVUyHNRPEeQHbzGUHVzOLjqyQqy16ovP3ASJ91F6G8QuobxW44vuq9YJ8Y+wg3xz7wYHnSHuXM52QGgdQ3YADyku48dgFB2Nsn2WmKnLjkcrJYTynpcQmU9PXL4eqHS2g5l9zwA/IURq+vMARprEz4V49HJesYRWDiNn90ma0pgaqmsBi5d+W6RsRcsUT3JX8hJgVaD9o8iRIU/vJJjX3uGbqKEwAD29aVXcvLfSgdkthlhIEWn1i5oKtR1RgXfd6Tbzxxg1ChMRfTXjXV8rc+TV/Rly95Sz3Co613NI8sM9aQjO+BHmnlKs+vWjCh0Dw8SLYzO4+/8LbHa3dJYn+wn6mK5HET/X5hRbipiiTrr3zrwhfrPs9cwDo/zg3/nIQ+pbFMUn807DaPfeTs6fF9W0T049yvOpsktM/XXBIx4uYA/enHoKcvR8z+Lb6YUkEbLxxnC2tggr4nKhd8K3BhBO0oTyO9WZUCXO2HdJKr4WPBJItWSY3PKPSeNXml0oYhjT53qORrEl+4=
