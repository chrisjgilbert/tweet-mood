language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
deploy:
  provider: heroku
  app:
    master: tweet-mood
    heroku: tweet-mood
  api_key:
    secure: wEtnbto30aEsN7FQVimhFtmynQuuTSPmVEZGYDNKix3EdBg4BOQbt1yUaGAC2vhs+Qyex1Sk1j1th7jq4MO9tWqNx4NcQVd5BVU//e20hDLKW9RoqnopRqcBGbD2W4oC9cmmnVfZ945gsNUNuoYFwWhjCMTKali+5Li3jzRi0f7vhb0PLOgLtbXt5lLuEsl4qdf+QrqHM3n/83Uv96Ru/aJlGvq6reMDd6hOGuRugAf4fPq7wNwwaonQVJ6/OORKUO+43FHM9xgZfW2xobe5Jd25Dn9hwBhJYvXi/ag7RacwKJNio3WS9fdZCaQ+HGcsk0kMXUPRiCYKbtQ7rA5WNE0NT/dml7U3WJUVM+sOCyEVT2Tn0sU3ETmIievrobpr/XhWApsDH7fMzUvDy3K0o6WDtlQ9azBrbcqVueigIlaU9zmb3cICN1pH6iSkgGXV3uaK9R0n9mWB6k5m4Qf4R4t2KZnPcnHhCKqc3XfwQJTO7pofRPgLL9hamVyGKVryjpGxtTanLbtr+3KhEYWIN3QuXACze6gi57IGnywk748jUx4oksCUBnKLAOovkWLMu8GbNhK3iR+zQ/x2mr9TY5cCqMniVLRcxNRHCx/Vg8ceq1EgJFUQhQ77IsNOr2F30WqKVyCRBfJ9YVlIq1U2TOFj15T2JfQQdphj56X0V5k=
