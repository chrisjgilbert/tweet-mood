language: python
matrix:
  include:
  - python: 3.7
    dist: xenial
    sudo: true
env:
  matrix:
  - DJANGO=2.1.5
  global:
  - DJANGO_SETTINGS_MODULE='mysite.settings'
  - CODECOV_TOKEN="a8e814d9-19c3-48f3-98ea-0ef43961a892"
addons:
  firefox: latest
before_install:
- pip install -r requirements.txt
- wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
script:
- pytest
after_success:
- codecov
deploy:
  provider: heroku
  app:
    master: tweet-mood
    heroku: tweet-mood
  api_key:
    secure: nPnfDAURdF45PVB2oXpQnRhVk+M1mF/jguDLmXBSmbWDfuqL12bBGJmELqbEZMVXCNKGQk+tkdCm52RqkC9BDFtU07qpFqfw3DvSGMujZGMve8ljHVCVIHvINnCW1glW1D2D3Qo9MAxma3UvZqAYOm7PZrVR1w9ZaBmQuT4uyxaogzCBQwtpv8Jz3/Re3LeC6NbgjgnSEVb3lSCOY7c8u7TCXQsOMPrRjGpM9XORP8Lodmcgr0ZGEj6L+j2VWmT+ToeuYCwN7d4KxavCfzM8G/lhSMA4XAEQE2EwcRj/RKM+xTKDuw4+bHWeRm3Uy54LqCoeMfa2InBeKHu1/pIQDGxbtj9hNBNjvBJu7YVd45dBKXSirCoiSJPX8ucygRtANibbzMLnAxoAnEd4/quSO3RaAQ7PXncQD2qnQd5bZmLai7hcmdB5fnVEyREX1KBicBxcKuhQ0seDv0oZ18JN6AvBkunQgZktNHVJ58LC0rM8BY/UIXwzNGAGcJcMf8H0NGi7ta8KgJp4/ibfohANqF2z4C7uEiiRG+uMTzAtuCkKCkoWr7IBw8wmKcO1daqfgEBsSsoKNSoVs0TegToC52khBLaW1ynkB0WgMOUWlxSpMG9eEht05emR/Y68/XEgO2FMs7NoXSPH1/gpYfo0xlq5gB2wMy+nW9ocemiW4oo=
